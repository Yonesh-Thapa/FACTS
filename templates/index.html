{% extends "layout.html" %}

{% block title %}Accounting Training Australia | Xero & MYOB Training | F.A.C.T.S{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1 class="hero-title">Launch Your Accounting Career with F.A.C.T.S</h1>
                <h2 class="hero-subtitle">Job-Ready Online Training for Aspiring Accountants Across Australia</h2>
                <div class="early-bird-banner mb-3">
                    <p>üéâ Save $150 if you enroll by April 30 ‚Äì Only 10 seats per session!</p>
                </div>
                <div class="countdown-timer mb-3">
                    <p>‚è≥ Early Bird Offer Ends In: <span id="countdown-timer"></span></p>
                </div>
                <p class="session-info">Next Session Starts May 7, 2025 ‚Äì Wed & Thu, 7:00-9:00 PM AEST</p>
                <p class="class-size-note"><i class="fas fa-users"></i> Only 10 students per session for personalized attention.</p>
                <a href="{{ url_for('contact') }}" class="btn btn-primary btn-lg hero-cta">Apply Now ‚Äì Secure Your Spot</a>
            </div>
            <div class="col-lg-6">
                <div class="hero-image">
                    <img src="{{ url_for('static', filename='images/classroom_accounting.jpg') }}" alt="Accounting Education Classroom" class="img-fluid">
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Intro Video and Why Choose F.A.C.T.S Section -->
<section class="intro-and-why-section py-5">
    <div class="container">
        <div class="row align-items-center">
            <!-- Video Column -->
            <div class="col-lg-6 mb-4 mb-lg-0">
                <h2 class="section-title text-center mb-4">Meet Your Mentor</h2>
                <div class="section-divider mx-auto mb-4"></div>
                <div class="video-wrapper">
                    <!-- Video with poster image -->
                    <video id="mentor-video" class="responsive-video" playsinline muted loop 
                        poster="{{ url_for('static', filename='images/tutor.jpg') }}">
                        <source src="{{ url_for('static', filename='videos/intro_video.mp4') }}?v=8" type="video/mp4">
                        <track kind="subtitles" label="English" srclang="en" src="{{ url_for('static', filename='videos/captions/mymentor.vtt') }}">
                        Your browser does not support the video tag.
                    </video>
                    
                    <!-- Big play button overlay -->
                    <div class="play-button-overlay">
                        <button id="big-play-button" class="big-play-button">
                            <i class="fas fa-play"></i>
                        </button>
                    </div>
                    
                    <!-- Simple controls at bottom -->
                    <div class="simple-video-controls">
                        <button id="play-pause-button" class="control-button" aria-label="Play">
                            <i class="fas fa-play"></i>
                        </button>
                        <button id="mute-button" class="control-button" aria-label="Unmute">
                            <i class="fas fa-volume-mute"></i>
                        </button>
                        <button id="cc-button" class="control-button" aria-label="Enable captions">
                            <i class="fas fa-closed-captioning"></i>
                        </button>
                    </div>
                </div>
                
                <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const video = document.getElementById('mentor-video');
                    const bigPlayBtn = document.getElementById('big-play-button');
                    const playBtn = document.getElementById('play-pause-button');
                    const muteBtn = document.getElementById('mute-button');
                    const ccBtn = document.getElementById('cc-button');
                    const overlay = document.querySelector('.play-button-overlay');
                    
                    // Function to start playing video
                    function playVideo() {
                        // Ensure video is muted for autoplay
                        video.muted = true;
                        
                        // Try to play
                        video.play().then(() => {
                            // Success - hide the play button
                            overlay.style.display = 'none';
                            playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                            playBtn.setAttribute('aria-label', 'Pause');
                        }).catch(e => {
                            // Autoplay failed - keep overlay visible
                            overlay.style.display = 'flex';
                            console.log("Autoplay prevented:", e);
                        });
                    }
                    
                    // Try autoplay immediately
                    playVideo();
                    
                    // Big play button click
                    bigPlayBtn.addEventListener('click', function() {
                        playVideo();
                    });
                    
                    // Play/pause button
                    playBtn.addEventListener('click', function() {
                        if (video.paused) {
                            video.play();
                            playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                            playBtn.setAttribute('aria-label', 'Pause');
                            overlay.style.display = 'none';
                        } else {
                            video.pause();
                            playBtn.innerHTML = '<i class="fas fa-play"></i>';
                            playBtn.setAttribute('aria-label', 'Play');
                            overlay.style.display = 'flex';
                        }
                    });
                    
                    // Mute/unmute button
                    muteBtn.addEventListener('click', function() {
                        video.muted = !video.muted;
                        if (video.muted) {
                            muteBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
                            muteBtn.setAttribute('aria-label', 'Unmute');
                        } else {
                            muteBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
                            muteBtn.setAttribute('aria-label', 'Mute');
                        }
                    });
                    
                    // Captions toggle
                    ccBtn.addEventListener('click', function() {
                        const track = video.textTracks[0];
                        if (track) {
                            track.mode = (track.mode === 'showing') ? 'hidden' : 'showing';
                            if (track.mode === 'showing') {
                                ccBtn.innerHTML = '<i class="fas fa-closed-captioning" style="opacity: 1;"></i>';
                                ccBtn.setAttribute('aria-label', 'Disable captions');
                            } else {
                                ccBtn.innerHTML = '<i class="fas fa-closed-captioning"></i>';
                                ccBtn.setAttribute('aria-label', 'Enable captions');
                            }
                        }
                    });
                    
                    // Update play/pause button when video state changes
                    video.addEventListener('play', function() {
                        playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                        playBtn.setAttribute('aria-label', 'Pause');
                        overlay.style.display = 'none';
                    });
                    
                    video.addEventListener('pause', function() {
                        playBtn.innerHTML = '<i class="fas fa-play"></i>';
                        playBtn.setAttribute('aria-label', 'Play');
                        overlay.style.display = 'flex';
                    });
                    
                    // Add touchend handler for iOS compatibility
                    document.addEventListener('touchend', function() {
                        if (video.paused) {
                            playVideo();
                        }
                    }, { once: true });
                    
                    // Click anywhere on document to start playing (for browsers with strict autoplay)
                    document.addEventListener('click', function() {
                        if (video.paused) {
                            playVideo();
                        }
                    }, { once: true });
                });
                </script>
            </div>
            
            <!-- Why Choose F.A.C.T.S Column -->
            <div class="col-lg-6">
                <h2 class="section-title text-center mb-4">Why Choose F.A.C.T.S</h2>
                <div class="section-divider mx-auto mb-4"></div>
                <div class="about-content">
                    <h3>Bridging the Gap from Graduation to Employment</h3>
                    <p>Future Accountants Coaching and Training Service (F.A.C.T.S) helps accounting graduates gain the practical skills employers are looking for. We combine technical software training with career preparation to help you stand out in the job market.</p>
                    <div class="features-list">
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Industry expert instructor with real-world experience</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Small class sizes for personalized attention</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>100% online, accessible from anywhere in Australia</span>
                        </div>
                    </div>
                    <div class="mt-4">
                        <a href="{{ url_for('about') }}" class="btn btn-secondary me-2">Learn More About Us</a>
                        <a href="{{ url_for('program') }}" class="btn btn-secondary">See Program Details</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Program Highlights -->
<section class="program-highlights">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-4">
                <h2 class="section-title">Program Highlights</h2>
                <div class="section-divider"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="highlight-card">
                    <div class="highlight-icon">
                        <i class="fas fa-laptop-code"></i>
                    </div>
                    <h3>Practical Software Training</h3>
                    <p>Hands-on experience with Xero & MYOB</p>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="highlight-card">
                    <div class="highlight-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3>Live Instructor-Led Sessions</h3>
                    <p>Interactive online classes with real-time feedback, questions, and discussions with our expert instructors.</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="highlight-card">
                    <div class="highlight-icon">
                        <i class="fas fa-briefcase"></i>
                    </div>
                    <h3>Job Placement Support</h3>
                    <p>Resume workshops, LinkedIn profile optimization, and interview practice sessions to help you land your first accounting role.</p>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="highlight-card">
                    <div class="highlight-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h3>Future-Proof Skills (AI & Cybersecurity)</h3>
                    <p>As part of our commitment to future-proofing your skills, we include an introduction to AI tools and cybersecurity basics within the program, making you more competitive in the modern job market.</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-12 text-center mt-4">
                <a href="{{ url_for('contact') }}" class="btn btn-primary btn-lg">Apply Now</a>
            </div>
        </div>
    </div>
</section>

<!-- Testimonials Section -->
<section class="testimonials-section py-5" style="background-color: #f1f8fe;">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-4">
                <h2 class="section-title">What Our Students Say</h2>
                <div class="section-divider"></div>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-lg-10 text-center">
                <div class="coming-soon-container p-5">
                    <i class="fas fa-hourglass-half fa-3x text-primary mb-3"></i>
                    <h3 class="mb-3">Student Testimonials Coming Soon</h3>
                    <p class="lead">We're collecting success stories from our graduates. Check back after our first cohort completes the program!</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Info Session Email Collection -->
<section class="info-session-section py-5" style="background-color: #ebf8ff;">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center">
                <div class="info-session-card p-4 rounded shadow-sm">
                    <h2 class="section-title">Want to Attend Our Free Info Session?</h2>
                    <div class="section-divider"></div>
                    <p class="lead mb-4">Learn more about our program, meet our instructor, and get your questions answered in our upcoming free information session.</p>
                    <form id="infoSessionForm" action="{{ url_for('collect_info_session_email') }}" method="POST" class="info-session-form">
                        <div class="input-group mb-3">
                            <input type="email" class="form-control" id="infoSessionEmail" name="email" placeholder="Enter your email address" required>
                            <button class="btn btn-primary" type="submit">Get Zoom Link</button>
                        </div>
                        <small class="form-text text-muted">Leave your email to get a Zoom link for our next free info session.</small>
                    </form>
                    <div class="mt-3">
                        <span class="badge bg-primary">Free</span>
                        <span class="badge bg-success">No obligation</span>
                        <span class="badge bg-info text-dark">Live Q&A</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Early Bird Offer Section -->
<section class="early-bird-section py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center">
                <div class="early-bird-card">
                    <div class="ribbon ribbon-top-right"><span>Save A$150</span></div>
                    <h2 class="section-title">Limited Time Early Bird Offer</h2>
                    <div class="section-divider"></div>
                    <p class="lead mb-4">Enroll before April 30, 2025 and save A$150 on your program fee.</p>
                    
                    <div class="countdown-container mb-4">
                        <h4>Offer Ends In:</h4>
                        <div id="homepage-offer-timer" class="countdown-timer" aria-live="polite" aria-label="Countdown to end of Early Bird offer">
                            Loading countdown...
                        </div>
                        <p class="mt-2"><a href="{{ url_for('pricing') }}" class="text-primary">View detailed pricing information</a></p>
                    </div>
                    
                    <div class="price-comparison mb-4">
                        <div class="row">
                            <div class="col-md-6 mb-3 mb-md-0">
                                <div class="price-card price-regular">
                                    <h5>Regular Price</h5>
                                    <div class="price">$1,650 <span>AUD</span></div>
                                    <div class="price-period">After April 30</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="price-card price-special highlighted">
                                    <h5>Early Bird Price</h5>
                                    <div class="price">$1,500 <span>AUD</span></div>
                                    <div class="price-period">Until April 30</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <a href="{{ url_for('contact') }}" class="btn btn-primary btn-lg">Apply Now ‚Äì Secure Your Spot</a>
                    <p class="mt-2"><small>Limited spots available for upcoming sessions</small></p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-section">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
                <h2>Ready to Launch Your Accounting Career?</h2>
                <p>Next Session Starts May 7, 2025 ‚Äì Wed & Thu, 7:00-9:00 PM AEST</p>
                <a href="{{ url_for('contact') }}" class="btn btn-primary btn-lg mt-3">Apply Now ‚Äì Start Your Journey</a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Set the deadline date for all countdown timers
    const deadline = new Date('April 30, 2025 23:59:59').getTime();
    
    // Find all countdown timers on the page
    const heroCountdown = document.getElementById('countdown-timer');
    const offerSectionCountdown = document.getElementById('homepage-offer-timer');
    
    // Cache for previous values to avoid unnecessary DOM updates
    const previousValues = {};
    
    // Set ARIA attributes once, not on every update
    if (heroCountdown) {
        heroCountdown.setAttribute('aria-live', 'off');
        heroCountdown.setAttribute('aria-atomic', 'true');
        heroCountdown.setAttribute('role', 'timer');
    }
    
    if (offerSectionCountdown) {
        offerSectionCountdown.setAttribute('aria-live', 'off');
        offerSectionCountdown.setAttribute('aria-atomic', 'true');
        offerSectionCountdown.setAttribute('role', 'timer');
    }
    
    // Update function for all timers
    function updateCountdowns() {
        const now = new Date().getTime();
        const timeRemaining = deadline - now;
        
        // Check if countdown is finished
        if (timeRemaining < 0) {
            const expiredText = 'Offer has expired';
            
            // Only update if content has changed
            if (heroCountdown && heroCountdown.textContent !== expiredText) {
                heroCountdown.textContent = expiredText;
            }
            
            if (offerSectionCountdown && offerSectionCountdown.textContent !== expiredText) {
                offerSectionCountdown.textContent = expiredText;
            }
            return;
        }
        
        // Calculate time components
        const days = Math.floor(timeRemaining / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);
        
        // Create cache key
        const cacheKey = `${days}:${hours}:${minutes}:${seconds}`;
        
        // Format time display
        const displayText = `${days}d ${hours}h ${minutes}m ${seconds}s`;
        
        // Only update DOM if values changed
        if (heroCountdown && previousValues['hero'] !== cacheKey) {
            heroCountdown.textContent = displayText;
            previousValues['hero'] = cacheKey;
        }
        
        if (offerSectionCountdown && previousValues['offer'] !== cacheKey) {
            offerSectionCountdown.textContent = displayText;
            previousValues['offer'] = cacheKey;
        }
    }
    
    // Update immediately
    updateCountdowns();
    
    // Then update every second
    setInterval(updateCountdowns, 1000);
});
</script>
{% endblock %}
